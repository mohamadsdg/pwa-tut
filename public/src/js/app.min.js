var deferredPrompt,enableNotificationButtons=document.querySelectorAll(".enable-notifications");function displayConfirmNotification(){var e;"serviceWorker"in navigator&&(e={body:"you successfully subscribed to our Notification service!",icon:"/src/images/icons/app-icon-96x96.png",image:"/src/images/sf-boat.jpg",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/app-icon-96x96.png",tag:"confirm-notify",renotify:!1,actions:[{action:"confirm",title:"Okay",icon:"/src/images/icons/app-icon-96x96.png"},{action:"cancel",title:"Cancel",icon:"/src/images/icons/app-icon-96x96.png"}]},navigator.serviceWorker.ready.then(i=>{i.showNotification("successfully subscribed (from sw)!",e)}))}function configurePushSub(){var e;"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(i=>(e=i).pushManager.getSubscription()).then(i=>{if(null===i)return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:urlBase64ToUint8Array("BHqSssB1Wgf_fSpKtfVIhY2IloLo6982UPh52L1xowNpO1STo5w0pEVOIp9A4Wfv0YR1qNpXM0esW5REM6VgY_4")}).then(i=>fetch("https://pwgram-30323-default-rtdb.asia-southeast1.firebasedatabase.app/subscriptions.json",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)})).then(i=>{i.ok&&displayConfirmNotification()}).catch(i=>{console.error(i)})})}function askForNotification(){Notification.requestPermission().then(i=>{console.log("User Choice",i),"granted"!==i?console.log("not granted permission for notification"):configurePushSub()})}if(window.Promise||(window.Promise=Promise),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("Service worker registered!")}).catch(function(i){console.log(i)}),window.addEventListener("beforeinstallprompt",function(i){return console.log("beforeinstallprompt fired"),i.preventDefault(),deferredPrompt=i,!1}),"Notification"in window&&"serviceWorker"in navigator)for(let i=0;i<enableNotificationButtons.length;i++)enableNotificationButtons[i].style.display="iniline-block",enableNotificationButtons[i].addEventListener("click",askForNotification);